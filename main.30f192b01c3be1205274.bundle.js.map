{"version":3,"file":"main.30f192b01c3be1205274.bundle.js","sources":["webpack:///./src/tooltips.tsx"],"sourcesContent":["\"use strict\";\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar isString_1 = __importDefault(require(\"lodash/isString\"));\nvar merge_1 = __importDefault(require(\"lodash/merge\"));\nvar noop_1 = __importDefault(require(\"lodash/noop\"));\nvar pick_1 = __importDefault(require(\"lodash/pick\"));\nvar React = __importStar(require(\"react\"));\nvar ReactDOM = __importStar(require(\"react-dom\"));\nvar styled_components_1 = __importDefault(require(\"styled-components\"));\nvar TARGET_OFFSET = 3;\nvar CLICK_TIMEOUT = 1000;\nvar createOnRemoveObserver = function (element, onDetachCallback) {\n    var observer = new MutationObserver(function () {\n        if (!document.contains(element)) {\n            observer.disconnect();\n            onDetachCallback();\n        }\n    });\n    observer.observe(document, {\n        childList: true,\n        subtree: true,\n    });\n    return observer;\n};\nvar arrowStyle = \"\\n\\tposition: absolute;\\n\\twidth: 0;\\n\\theight: 0;\\n\\tborder-color: transparent;\\n\\tborder-style: solid;\\n\";\nvar TooltipTopArrow = styled_components_1.default.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n\\t\", \" bottom: 0;\\n\\tleft: 50%;\\n\\tmargin-left: -5px;\\n\\tborder-width: 5px 5px 0;\\n\\tborder-top-color: #000;\\n\"], [\"\\n\\t\", \" bottom: 0;\\n\\tleft: 50%;\\n\\tmargin-left: -5px;\\n\\tborder-width: 5px 5px 0;\\n\\tborder-top-color: #000;\\n\"])), arrowStyle);\nvar TooltipRightArrow = styled_components_1.default.div(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n\\t\", \" top: 50%;\\n\\tleft: 0;\\n\\tmargin-top: -5px;\\n\\tborder-width: 5px 5px 5px 0;\\n\\tborder-right-color: #000;\\n\"], [\"\\n\\t\", \" top: 50%;\\n\\tleft: 0;\\n\\tmargin-top: -5px;\\n\\tborder-width: 5px 5px 5px 0;\\n\\tborder-right-color: #000;\\n\"])), arrowStyle);\nvar TooltipLeftArrow = styled_components_1.default.div(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n\\t\", \" top: 50%;\\n\\tright: 0;\\n\\tmargin-top: -5px;\\n\\tborder-width: 5px 0 5px 5px;\\n\\tborder-left-color: #000;\\n\"], [\"\\n\\t\", \" top: 50%;\\n\\tright: 0;\\n\\tmargin-top: -5px;\\n\\tborder-width: 5px 0 5px 5px;\\n\\tborder-left-color: #000;\\n\"])), arrowStyle);\nvar TooltipBottomArrow = styled_components_1.default.div(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n\\t\", \" top: 0;\\n\\tleft: 50%;\\n\\tmargin-left: -5px;\\n\\tborder-width: 0 5px 5px;\\n\\tborder-bottom-color: #000;\\n\"], [\"\\n\\t\", \" top: 0;\\n\\tleft: 50%;\\n\\tmargin-left: -5px;\\n\\tborder-width: 0 5px 5px;\\n\\tborder-bottom-color: #000;\\n\"])), arrowStyle);\nvar getArrowElement = function (placement) {\n    switch (placement) {\n        case 'right':\n            return TooltipRightArrow;\n        case 'bottom':\n            return TooltipBottomArrow;\n        case 'left':\n            return TooltipLeftArrow;\n        default:\n            return TooltipTopArrow;\n    }\n};\nvar TooltipElement = styled_components_1.default.div(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n\\tdisplay: block;\\n\\tfont-size: 12px;\\n\\tfont-style: normal;\\n\\tfont-weight: 400;\\n\\tletter-spacing: normal;\\n\\tline-break: auto;\\n\\tline-height: 1.42857143;\\n\\tpadding: 5px;\\n\\tposition: absolute;\\n\\tmax-width: 300px;\\n\\ttext-align: left;\\n\\ttext-align: start;\\n\\ttext-decoration: none;\\n\\ttext-shadow: none;\\n\\ttext-transform: none;\\n\\tvisibility: hidden;\\n\\twhite-space: normal;\\n\\tword-break: normal;\\n\\tword-spacing: normal;\\n\\tword-wrap: normal;\\n\\tz-index: 10000;\\n\\tcolor: white;\\n\"], [\"\\n\\tdisplay: block;\\n\\tfont-size: 12px;\\n\\tfont-style: normal;\\n\\tfont-weight: 400;\\n\\tletter-spacing: normal;\\n\\tline-break: auto;\\n\\tline-height: 1.42857143;\\n\\tpadding: 5px;\\n\\tposition: absolute;\\n\\tmax-width: 300px;\\n\\ttext-align: left;\\n\\ttext-align: start;\\n\\ttext-decoration: none;\\n\\ttext-shadow: none;\\n\\ttext-transform: none;\\n\\tvisibility: hidden;\\n\\twhite-space: normal;\\n\\tword-break: normal;\\n\\tword-spacing: normal;\\n\\tword-wrap: normal;\\n\\tz-index: 10000;\\n\\tcolor: white;\\n\"])));\nvar TooltipElementInner = styled_components_1.default.div(templateObject_6 || (templateObject_6 = __makeTemplateObject([\"\\n\\tbackground: black;\\n\\tborder-radius: 4px;\\n\\tpadding: 3px 8px;\\n\\ttext-align: center;\\n\"], [\"\\n\\tbackground: black;\\n\\tborder-radius: 4px;\\n\\tpadding: 3px 8px;\\n\\ttext-align: center;\\n\"])));\nvar TooltipComponent = (function (_super) {\n    __extends(TooltipComponent, _super);\n    function TooltipComponent(props) {\n        var _this = _super.call(this, props) || this;\n        _this.state = {\n            show: false,\n            placement: 'top',\n            coordinates: {\n                top: 0,\n                left: 0,\n            },\n        };\n        return _this;\n    }\n    TooltipComponent.prototype.observe = function (target) {\n        var _this = this;\n        if (this.observer) {\n            this.observer.disconnect();\n        }\n        this.observer = createOnRemoveObserver(target, function () {\n            _this.hide();\n        });\n    };\n    TooltipComponent.prototype.show = function (e, tooltipText, options) {\n        if (options === void 0) { options = {}; }\n        var top = 0;\n        var left = 0;\n        var target = e.target;\n        this.observe(target);\n        var boundingClientRect = target.getBoundingClientRect();\n        var boundingRect = pick_1.default(boundingClientRect, ['top', 'left', 'width', 'height']);\n        boundingRect.top += window.scrollY;\n        boundingRect.left += window.scrollX;\n        var placement = options.placement, containerStyle = options.containerStyle, innerStyle = options.innerStyle, arrowStyle = options.arrowStyle;\n        if (this.tooltipElementInner) {\n            this.tooltipElementInner.innerText = tooltipText;\n        }\n        if (!placement || placement === 'top') {\n            top = boundingRect.top - this.tooltipElement.clientHeight - TARGET_OFFSET;\n            left =\n                boundingRect.left +\n                    boundingRect.width / 2 -\n                    this.tooltipElement.clientWidth / 2;\n        }\n        if (placement === 'right') {\n            top =\n                boundingRect.top +\n                    boundingRect.height / 2 -\n                    this.tooltipElement.clientHeight / 2;\n            left = boundingRect.left + boundingRect.width + TARGET_OFFSET;\n        }\n        if (placement === 'bottom') {\n            top = boundingRect.top + boundingRect.height + TARGET_OFFSET;\n            left =\n                boundingRect.left +\n                    boundingRect.width / 2 -\n                    this.tooltipElement.clientWidth / 2;\n        }\n        if (placement === 'left') {\n            top =\n                boundingRect.top +\n                    boundingRect.height / 2 -\n                    this.tooltipElement.clientHeight / 2;\n            left =\n                boundingRect.left - this.tooltipElement.clientWidth - TARGET_OFFSET;\n        }\n        this.setState({\n            coordinates: { top: top, left: left },\n            show: true,\n            placement: placement,\n            containerStyle: containerStyle,\n            innerStyle: innerStyle,\n            arrowStyle: arrowStyle,\n        });\n    };\n    TooltipComponent.prototype.hide = function () {\n        if (this.observer) {\n            this.observer.disconnect();\n            this.observer = undefined;\n        }\n        this.setState({\n            show: false,\n            coordinates: {\n                top: 0,\n                left: 0,\n            },\n        });\n    };\n    TooltipComponent.prototype.render = function () {\n        var _this = this;\n        var _a = this.state, placement = _a.placement, containerStyle = _a.containerStyle, innerStyle = _a.innerStyle, arrowStyle = _a.arrowStyle;\n        var Arrow = getArrowElement(placement);\n        var tooltipStyle = merge_1.default({\n            top: this.state.coordinates.top,\n            left: this.state.coordinates.left,\n            visibility: this.state.show ? 'visible' : 'hidden',\n        }, containerStyle);\n        return (React.createElement(TooltipElement, { style: tooltipStyle, ref: function (el) { return (_this.tooltipElement = el); } },\n            React.createElement(TooltipElementInner, { ref: function (el) { return (_this.tooltipElementInner = el); }, style: innerStyle }),\n            React.createElement(Arrow, { style: arrowStyle })));\n    };\n    return TooltipComponent;\n}(React.Component));\nvar Tooltips = (function () {\n    function Tooltips() {\n        this.initialised = false;\n        this.hideOnMouseOut = null;\n    }\n    Tooltips.prototype.initialiseElements = function () {\n        var _this = this;\n        if (this.initialised || !document || !document.body) {\n            return;\n        }\n        var tooltipRoot = document.createElement('div');\n        tooltipRoot.id = 'rendition-tooltip-root';\n        document.body.appendChild(tooltipRoot);\n        document.addEventListener('mouseover', function (e) {\n            var target = e.target;\n            if (!_this.hideOnMouseOut ||\n                _this.hideOnMouseOut === target) {\n                return;\n            }\n            if (_this.hideOnMouseOut.firstElementChild &&\n                _this.hideOnMouseOut.contains &&\n                _this.hideOnMouseOut.contains(target)) {\n                return;\n            }\n            _this.hide();\n            _this.hideOnMouseOut = null;\n        });\n        this.component = ReactDOM.render(React.createElement(TooltipComponent, null), tooltipRoot);\n        this.initialised = true;\n    };\n    Tooltips.prototype.bindProps = function (props) {\n        var _this = this;\n        if (props.tooltip) {\n            var options_1 = {};\n            var trigger = 'hover';\n            var tooltipText_1;\n            if (isString_1.default(props.tooltip)) {\n                tooltipText_1 = props.tooltip;\n            }\n            else {\n                tooltipText_1 = props.tooltip.text;\n                options_1.placement = props.tooltip.placement;\n                options_1.containerStyle = props.tooltip.containerStyle;\n                options_1.innerStyle = props.tooltip.innerStyle;\n                options_1.arrowStyle = props.tooltip.arrowStyle;\n                if (props.tooltip.trigger) {\n                    trigger = props.tooltip.trigger;\n                }\n            }\n            if (tooltipText_1) {\n                var showFn_1 = function (e) { return _this.show(e, tooltipText_1, options_1); };\n                if (trigger === 'click') {\n                    var oldFn_1 = props.onClick || noop_1.default;\n                    var hideFn_1 = function () {\n                        clearTimeout(_this.hideTimeout);\n                        _this.hideTimeout = window.setTimeout(function () { return _this.hide(); }, CLICK_TIMEOUT);\n                    };\n                    props.onClick = function (e) {\n                        showFn_1(e);\n                        hideFn_1();\n                        oldFn_1(e);\n                    };\n                }\n                else {\n                    var oldMEFn_1 = props.onMouseEnter || noop_1.default;\n                    props.onMouseEnter = function (e) {\n                        showFn_1(e);\n                        oldMEFn_1(e);\n                        if (e.target.disabled) {\n                            _this.hideOnMouseOut = e.target;\n                        }\n                    };\n                    var oldMLFn_1 = props.onMouseLeave || noop_1.default;\n                    props.onMouseLeave = function (e) {\n                        _this.hide();\n                        oldMLFn_1(e);\n                    };\n                }\n            }\n        }\n        return props;\n    };\n    Tooltips.prototype.show = function (e, tooltipText, options) {\n        this.initialiseElements();\n        this.component.show(e, tooltipText, options);\n    };\n    Tooltips.prototype.hide = function () {\n        this.initialiseElements();\n        this.component.hide();\n    };\n    return Tooltips;\n}());\nexports.Tooltips = Tooltips;\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5, templateObject_6;\n"],"mappings":"AACA","sourceRoot":""}